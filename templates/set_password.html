<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Set Password</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; }
    .card { max-width:400px; margin:60px auto; background:#fff; padding:30px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,.1); }
    .title { text-align:center; margin-bottom:20px; color:#1f2937; }
    .subtitle { text-align:center; margin-bottom:20px; color:#6b7280; font-size:14px; }
    .email-display { background:#f8f9fa; border:1px solid #e9ecef; border-radius:6px; padding:12px; text-align:center; margin-bottom:20px; font-weight:600; color:#495057; }
    input { width:100%; padding:12px; margin:8px 0; border:1px solid #ddd; border-radius:6px; font-size:16px; }
    input:focus { outline:none; border-color:#007bff; box-shadow:0 0 0 2px rgba(0,123,255,.25); }
    button { width:100%; padding:12px; background:#28a745; color:#fff; border:none; border-radius:6px; cursor:pointer; font-size:16px; margin-top:10px; }
    button:hover { background:#218838; }
    .error { color:#dc3545; margin:8px 0; text-align:center; background:#f8d7da; padding:10px; border-radius:4px; border:1px solid #f5c6cb; }
    .link { text-align:center; margin-top:15px; }
    .link a { color:#007bff; text-decoration:none; }
    .link a:hover { text-decoration:underline; }
    .info-box { background:#d4edda; border:1px solid #c3e6cb; border-radius:6px; padding:15px; margin-bottom:20px; }
    .info-box p { margin:0; color:#155724; font-size:14px; }
    .password-requirements { background:#e7f3ff; border:1px solid #b3d9ff; border-radius:6px; padding:15px; margin-bottom:20px; }
    .password-requirements h4 { margin:0 0 10px 0; color:#0066cc; font-size:14px; }
    .password-requirements ul { margin:0; padding-left:20px; color:#0066cc; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h2 class="title">Create Your Password</h2>
    <p class="subtitle">Almost done! Create a secure password for your account</p>
    
    <div class="email-display">{{ email }}</div>
    
    {% if error %}
    <div class="error">{{ error }}</div>
    {% endif %}
    
    <div class="info-box">
      <p><strong>Success!</strong> Your email has been verified. Now create a password to complete your account setup.</p>
    </div>
    
    <div class="password-requirements">
      <h4>Password Requirements:</h4>
      <ul>
        <li>At least 6 characters long</li>
        <li>Use a combination of letters and numbers</li>
        <li>Avoid common passwords</li>
      </ul>
    </div>
    
    <form method="post" action="/set_password">
      <input type="hidden" name="email" value="{{ email }}">
      <input type="password" name="password" placeholder="Enter new password" required minlength="6">
      <input type="password" name="confirm" placeholder="Confirm new password" required minlength="6">
      <button type="submit">Create Password</button>
    </form>
    
    <div class="link">
      <a href="/login">Back to Login</a>
    </div>
  </div>

  <script>
    // Check if passwords match
    document.querySelector('input[name="confirm"]').addEventListener('input', function(e) {
      const password = document.querySelector('input[name="password"]').value;
      const confirm = e.target.value;
      
      if (confirm && password !== confirm) {
        e.target.style.borderColor = '#dc3545';
        e.target.style.boxShadow = '0 0 0 2px rgba(220,53,69,.25)';
      } else {
        e.target.style.borderColor = '#28a745';
        e.target.style.boxShadow = '0 0 0 2px rgba(40,167,69,.25)';
      }
    });
  </script>
</body>
</html>
